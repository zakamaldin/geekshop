{% extends 'base.html' %}
{% block paje_js %}
    <script src="{% static 'mainapp/js/counter.js' %}"></script>
    <script src="{% static 'cart/js/items.js' %}"></script>

    <script>
        const productList = document.querySelector('.product-list');
        const items = getLocalValue('products');
        const identityList = Object.keys(items);
        const productsUrl = `{% url 'rest_products:rest_list' %}?id__in=${identityList.join()}`;

        fetch(productsUrl)
            .then(response => response.json())
            .then(data => {
                console.log(data);
                data.results.map(
                    itm => productList.innerHTML += renderItem(itm, items[itm.id])
                )
            })
    </script>
{% endblock %}